<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>A Moment With Spurgeon</title>
		<style>
			/* Critical CSS to prevent any content flash */
			html,
			body {
				visibility: hidden;
				background: #000;
				margin: 0;
				padding: 0;
				height: 100%;
			}

			/* Loader styles updated for better transitions */
			#loader {
				display: none;
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				z-index: 9999;
				justify-content: center;
				align-items: center;
				flex-direction: column;
				opacity: 0;
				transition: opacity 0.3s ease;
			}

			#loader.visible {
				opacity: 1;
			}

			.image-container {
				display: flex;
				flex-direction: column;
				align-items: center;
				gap: 20px;
			}

			/* Only shown when JS fails to load */
			.js-error-state {
				visibility: visible;
				color: white;
				display: none;
				justify-content: center;
				align-items: center;
				height: 100vh;
				text-align: center;
				font-family:
					system-ui,
					-apple-system,
					sans-serif;
			}
		</style>
		<link rel="stylesheet" href="styles.css" id="mainStylesheet" />
		<link
			rel="icon"
			type="image/png"
			sizes="16x16"
			href="icons/icon16.png"
			id="favicon"
		/>
	</head>
	<body>
		<!-- Loader with improved structure -->
		<div id="loader">
			<div class="image-container">
				<img class="image" src="icons/icon128.png" alt="Spurgeon Icon" />
				<img
					class="signature"
					src="spurgeon-signature.jpg"
					alt="Spurgeon Signature"
				/>
			</div>
			<div class="loading-text"></div>
		</div>

		<!-- Main content -->
		<div class="background" id="background"></div>
		<div class="container">
			<div class="time" id="time"></div>
			<div class="content">
				<div class="greeting">
					<span id="timeOfDay"></span>
					<span id="userNamePrompt">, what's your name?</span>
					<input type="text" id="userNameInput" placeholder="Enter your name" />
				</div>
				<div class="quote-block">
					<p id="quote"></p>
					<p>~ Charles Spurgeon</p>
				</div>
			</div>
		</div>
		<div class="attribution" style="opacity: 0">
			<a id="photoLink" href=""> photo by: </a>
			<a href="" id="photog"></a> on
			<a
				href="https://unsplash.com/?utm_source=a_moment_of_spurgeon&utm_medium=referral"
			>
				Unsplash
			</a>
			<p id="location"></p>
		</div>
		<div id="devotionalDrawer" class="drawer">
			<div class="drawer-header">
				<div class="drawer-title">
					Charles Spurgeon's Morning and Evening devotional.
				</div>
				<button id="closeDrawer" class="close-button">
					<svg
						viewBox="0 0 24 24"
						fill="none"
						stroke="currentColor"
						stroke-width="2"
					>
						<path d="M6 18L18 6M6 6l12 12" />
					</svg>
				</button>
			</div>
			<div class="drawer-content-container">
				<div id="devotionalContent" class="devotional-content">
					<!-- Content will be populated by JavaScript -->
				</div>
			</div>
		</div>
		<div class="toggle-container">
			<button id="devotionalToggle" class="drawer-toggle">
				<span class="drawer-label">Devotional</span>
				<svg
					class="drawer-icon"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
				>
					<polyline points="6 9 12 15 18 9" />
				</svg>
			</button>
			<div class="toggle-wrapper">
				<input type="radio" name="timeFormat" id="format12hr" value="12hr" />
				<input
					type="radio"
					name="timeFormat"
					id="format24hr"
					value="24hr"
					checked
				/>

				<div class="toggle-slider"></div>

				<label class="toggle-label left" for="format12hr">12h</label>
				<label class="toggle-label right" for="format24hr">24h</label>
			</div>

			<button id="newImageButton">New Image</button>
			<button id="newQuoteButton">New Quote</button>
		</div>
		<!-- Error state -->
		<div class="js-error-state">
			<div>
				<h2>Unable to load content</h2>
				<p>Please refresh the page or try again later.</p>
			</div>
		</div>
		<script src="script.js"></script>
	</body>
</html>
